<!DOCTYPE html>
<html lang="en">
	<head>
	<title>SafeFrame Testing for Creative</title>
	
	<link rel="stylesheet" type="text/css" href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.min.css" />
	<!-- <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/js/bootstrap.min.js"></script> -->
	<style type="text/css">
	.padtop {
		margin-top: 50px;
	}
	iframe {
		background: #ddd;
	}
	h1 {
		font-size: 1.5em;
		text-shadow: 1px 1px 2px #bbb;
	}
	label{
		font-weight: bold;
	}
	
	#htmlInput{
		max-idth:600px;
		width: 90%;
		height:150px;"	
	}
	input.size{
		width:50px;
	}
	
	.sampleRow select {
		vertical-align: baseline;
	}
	
	.linearForm label {
		display: inline;
		margin-left: 20px;
	}
	.linearForm label:first-child {
		margin-left: 0px;
	}
	
	.linearForm input {
		vertical-align: baseline;
	}
	
	.actionButtons button{
		margin-right: 20px;
	}
	</style>
	</head>
	<body>
<nav>	
<div class="navbar navbar-inverse navbar-fixed-top">  
  <div class="navbar-inner">  
    <div class="container">  
    <ul class="nav">  
  <li class="active">  
    <a class="brand" target="_blank" href="https://sourceforge.net/p/safeframes/wiki/Home/" title="SafeFrame Reference Implementation">SafeFrame</a>  
  </li>  
  <li><a  target="_blank" href="http://www.iab.net/safeframe">IAB</a></li>  
  <li><a target="_blank" href="http://www.iab.net/media/file/SafeFramesSpec.pdf">SafeFrame Specification</a></li>  
</ul> 
    </div>  
  </div>  
</div>   
	</nav>
	
	<div class="container padtop">
	<div class="row">
	<div class="span4">
	<h1>SafeFrame Ad Test Page</h1>
	<p>
	This page allows you to test the rendering of your ad creative assets under SafeFrame.
	Paste your ad code into the text block and push the <i>Render Input</i> button.
	Your ad will render below.
	</p>
	<p>
	This page utilizes the SafeFrame reference implementation developed in partnership with the IAB and SafeFrame Working Group.
	Live publisher implementations require that you host the SafeFrame framework code on your own CDN.
	</p>
	</div>
	
	<div class="span8">
	
	<label for="htmlInput">HTML Input</label>
	
	<textarea id="htmlInput" ></textarea>
	
	<div class="linearForm sampleRow">
	<label>Samples</label>
	<select onchange="loadSample(this)">
		<option value="" selected>[Custom Content]</option>
		<option value="lrec_data">Medium Rectangle (300x250)</option>
		<option value="n_data">Leaderboard (728x90)</option>
		<option value="sky_data">Skyscraper (120x600)</option>
	</select>
	<a href="http://www.iab.net/guidelines/508676/508767/displayguidelines" target="_blank" title="Ad Unit Definitions"><span class="icon-question-sign"></span></a>
	</div>
	
	<div class="linearForm">
	<label>Width</label> <input id="width_input" type="text" class="size" value="350" /> 
	<label>Height</label> <input id="height_input" type="text" class="size" value="350" />
	</div>
	<div class="actionButtons">
					<button class="btn btn-primary" onclick="renderInput()">Render Input</button>
					<button class="btn" onclick="$sf.host.nuke()">Remove</button>
	</div>
	</div>
	</div>
	
</div>
		<hr />


		<div style="position:relative;margin:0px;width:100%;right:auto;top:auto;left:auto;margin-left:auto;margin-right:auto;text-align:center;width:100%;">
			<div style="display:inline-block">
				<div id="tgtLREC"></div>
			</div>
		</div>
		<script type="text/javascript" src="https://s3-us-west-2.amazonaws.com/sftemp/sf_v1.0.1/js/lib/base.js"></script>
		<script type="text/javascript" src="https://s3-us-west-2.amazonaws.com/sftemp/sf_v1.0.1/js/host/host.js"></script>
		<script type="text/javascript" src="https://s3-us-west-2.amazonaws.com/sftemp/sf_v1.0.1/js/lib/boot.js"></script>
		
		<!-- Script code to handle code-based rendering -->
		<script type="text/javascript">
		
		/**
		* Load one of the pre-defined samples for rendering.
		*/
		function loadSample(selCtl){
			var sampId = selCtl[selCtl.selectedIndex].value,
				contEl = getEl("htmlInput"),
				size, wd, ht, bits,
				el, code;
			
			if(sampId == ""){
				contEl.value = "";
				return;
			}
			
			el = getEl(sampId);
			size = el.getAttribute('adsize');
			bits = size.split('x');
			wd = bits[0];
			ht = bits[1];
			debugger;
			code = el && (el.text || el.innerHTML || el.innerText);
			if (code) {
				try {
					f 		= new Function("return " + code);
					code	= f();
				} catch (e) {
					code = f = null;
				}
				if (code) {
					el			= Dom.elt("ad_tag_input");
					el.value	= code;

					el			= Dom.elt("ad_tag_width");
					el.value	= w;

					el			= Dom.elt("ad_tag_height");
					el.value	= h;
				}
			}			
			contEl.value = samp;
			renderInput();		
		}
		
		/**
		* Render the given HTML as a SafeFrame ad
		*/
		function renderInput() {
			var el, val, w, h, html, posID, posConf, pos;

			$sf.host.nuke();

			el 	= $sf.lib.dom.elt("htmlInput");
			val = (el && el.value) || "";
			val = $sf.lib.lang.trim(val);

			if (!val) {
				alert("No HTML specified");
				return;
			}

			html = val;

			el	= $sf.lib.dom.elt("width_input");
			val = (el && el.value) || "";
			val = $sf.lib.lang.cnum(val,0);

			if (val <= 0) {
				alert("Width must be a valid number from 1 to 9999 pixels");
				return;
			}

			w = val;


			el	= $sf.lib.dom.elt("height_input");
			val = (el && el.value) || "";
			val = $sf.lib.lang.cnum(val,0);

			if (val <= 0) {
				alert("Height must be a valid number from 1 to 9999 pixels");
				return;
			}

			h 	= val;


			posID	 = "test_" + w + "x" + h;
			posConf	 = new $sf.host.PosConfig({id:posID,w:w,h:h,dest:"tgtLREC"});
			pos		 = new $sf.host.Position(posID, html);

			$sf.host.render(pos);

		}
		
		/**
		* Shortcut document.getElementById
		*/
		function getEl(elemId){
			return document.getElementById(elemId);
		}

		/**
		* Define the Config bootstrap to start SafeFrame.
		* This identifies the location of the rendering bootstrap file
		* and defines initial position placements.
		*/
		(function() {
			var conf	= new $sf.host.Config({
				renderFile:		"https://s3-us-west-2.amazonaws.com/sftemp/sf_v1.0.1/html/r.html",
				positions:
				{
					"LREC":
					{
						id:		"LREC",
						dest:	"tgtLREC",
						w:		300,
						h:		250
					}
				}
			});

			var posMeta		= new $sf.host.PosMeta(null,"rmx",{foo:"bar",bar:"foo"});
			var pos			= new $sf.host.Position("LREC", "<h3>[[Ad Placement Here]]</h3>", posMeta);

			$sf.host.render(pos);
		})();
		</script>

<!-- ========================  SAMPLE ADS ===================================== -->

	<script type="text/plain" adsize="300x250" id="lrec_data">
	"<!--  Standard Inventory Ad; AdinteraxID:140093; ad:cgong-teset/LREC_exp; publisher:publisher1; campaign:demo; size:300x250; Ad File Size:48kB; (by adinterax)  -->\r\n<scr"+"ipt type=\"text/javascr"+"ipt\">\r\n//adx_U_140093=\"[ your-click-through-URL-goes-here ]\";\r\n//adx_D_140093=\"[ your-click-track-URL-goes-here ]\";\r\n//adx_I_140093=\"[ your-impression-track-pixel-URL-goes-here ]\";\r\n\r\nvar d=document,r=d.referrer,i,p=new Array(\"U\",\"D\",\"I\");\r\nvar q=1299740125;\r\nvar cacheBust=0;\r\nr=((r&&(i=r.indexOf(\"/\",9))>0)?r.substring(0,i):r);\r\nvar u=\"l.yimg.com/pq/js/adx_qa,cgong-teset/LREC_exp,C=demo,P=publisher1\";\r\nvar uid=140093,w=300,h=250;\r\n\r\n</scr"+"ipt>\r\n<scr"+"ipt id=\"load_wrapper\" type=\"text/javascr"+"ipt\" src=\"http://l.yimg.com/pq/wrapper.js\"></scr"+"ipt>\r\n<noscr"+"ipt><a href=\"http://tr.adinterax.com/re/adx_qa,cgong-teset/LREC_exp,C=demo,P=publisher1/0/0/tc,c:noscr"+"ipt/http://www.barclays.com/\"><img src=\"http://tr.adinterax.com/re/adx_qa,cgong-teset/LREC_exp,C=demo,P=publisher1/0/0/in,ti/http://l.yimg.com/pq/customer/adx_qa/0/hawaiiexplrec_g_300x250_soho_1.gif?adxq=1298696215\" border=0></a></noscr"+"ipt>"
	</script>
	
	<script type="text/plain" adsize="120x600" id="sky_data">
	"<!--  Standard Inventory Ad; AdinteraxID:140095; ad:cgong-teset/120_600_exp; publisher:publisher1; campaign:demo; size:120x600; Ad File Size:54kB; (by adinterax)  -->\r\n<scr"+"ipt type=\"text/javascr"+"ipt\">\r\n//adx_U_140095=\"[ your-click-through-URL-goes-here ]\";\r\n//adx_D_140095=\"[ your-click-track-URL-goes-here ]\";\r\n//adx_I_140095=\"[ your-impression-track-pixel-URL-goes-here ]\";\r\n\r\nvar d=document,r=d.referrer,i,p=new Array(\"U\",\"D\",\"I\");\r\nvar q=1299740219;\r\nvar cacheBust=0;\r\nr=((r&&(i=r.indexOf(\"/\",9))>0)?r.substring(0,i):r);\r\nvar u=\"l.yimg.com/pq/js/adx_qa,cgong-teset/120_600_exp,C=demo,P=publisher1\";\r\nvar uid=140095,w=120,h=600;\r\n\r\n</scr"+"ipt>\r\n<scr"+"ipt id=\"load_wrapper\" type=\"text/javascr"+"ipt\" src=\"http://l.yimg.com/pq/wrapper.js\"></scr"+"ipt>\r\n<noscr"+"ipt><a href=\"http://tr.adinterax.com/re/adx_qa,cgong-teset/120_600_exp,C=demo,P=publisher1/0/0/tc,c:noscr"+"ipt/http://adinterax.com\"><img src=\"http://tr.adinterax.com/re/adx_qa,cgong-teset/120_600_exp,C=demo,P=publisher1/0/0/in,ti/http://l.yimg.com/pq/customer/adx_qa/0/120x600_skyscraper_070102_v2.jpg?adxq=1290143223\" border=0></a></noscr"+"ipt>"
	</script>
	
	<script type="text/plain" adsize="728x90" id="n_data">
	"<!--  Standard Inventory Ad; AdinteraxID:140094; ad:cgong-teset/728_90_exp_flash; publisher:publisher1; campaign:demo; size:728x90; Ad File Size:50kB; (by adinterax)  -->\r\n<scr"+"ipt type=\"text/javascr"+"ipt\">\r\n//adx_U_140094=\"[ your-click-through-URL-goes-here ]\";\r\n//adx_D_140094=\"[ your-click-track-URL-goes-here ]\";\r\n//adx_I_140094=\"[ your-impression-track-pixel-URL-goes-here ]\";\r\n\r\nvar d=document,r=d.referrer,i,p=new Array(\"U\",\"D\",\"I\");\r\nvar q=1299740195;\r\nvar cacheBust=0;\r\nr=((r&&(i=r.indexOf(\"/\",9))>0)?r.substring(0,i):r);\r\nvar u=\"l.yimg.com/pq/js/adx_qa,cgong-teset/728_90_exp_flash,C=demo,P=publisher1\";\r\nvar uid=140094,w=728,h=90;\r\n\r\n</scr"+"ipt>\r\n<scr"+"ipt id=\"load_wrapper\" type=\"text/javascr"+"ipt\" src=\"http://l.yimg.com/pq/wrapper.js\"></scr"+"ipt>\r\n<noscr"+"ipt><a href=\"http://tr.adinterax.com/re/adx_qa,cgong-teset/728_90_exp_flash,C=demo,P=publisher1/0/0/tc,c:noscr"+"ipt/DART\"><img src=\"http://tr.adinterax.com/re/adx_qa,cgong-teset/728_90_exp_flash,C=demo,P=publisher1/0/0/in,ti/http://l.yimg.com/pq/customer/adx_qa/0/seat_shakira_es_728x90_exp_.gif?adxq=1258066365\" border=0></a></noscr"+"ipt>"
	</script>


		</body>
</html>